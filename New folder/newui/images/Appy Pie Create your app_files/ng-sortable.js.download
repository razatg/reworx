!function(){"use strict";angular.module("ui.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"zuhair",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden",dragging:"as-sortable-dragging"})}(),function(){"use strict";angular.module("ui.sortable").factory("$helper",["$document","$window",function(e,t){return{height:function(e){return e[0].getBoundingClientRect().height},width:function(e){return e[0].getBoundingClientRect().width},offset:function(n,o){var a=n[0].getBoundingClientRect();return o||(o=e[0].documentElement),{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||o.scrollTop-o.offsetTop),left:a.left+(t.pageXOffset||o.scrollLeft-o.offsetLeft)}},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return void 0!==e.touches&&e.touches.length>1?t=!0:void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&e.originalEvent.touches.length>1&&(t=!0),t},positionStarted:function(e,t,n){var o={};return o.offsetX=e.pageX-this.offset(t,n).left,o.offsetY=e.pageY-this.offset(t,n).top,o.startX=o.lastX=e.pageX,o.startY=o.lastY=e.pageY,o.nowX=o.nowY=o.distX=o.distY=o.dirAx=0,o.dirX=o.dirY=o.lastDirX=o.lastDirY=o.distAxX=o.distAxY=0,o},calculatePosition:function(e,t){e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=t.pageX,e.nowY=t.pageY,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1;var n=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==n?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=n},movePosition:function(e,t,n,o,a,r){var l,i="relative"===a;t.x=e.pageX-n.offsetX,t.y=e.pageY-n.offsetY,o&&(l=this.offset(o,r),i&&(t.x-=l.left,t.y-=l.top,l.left=0,l.top=0),t.x<l.left?t.x=l.left:t.x>=l.width+l.left-this.offset(t).width&&(t.x=l.width+l.left-this.offset(t).width),t.y<l.top?t.y=l.top:t.y>=l.height+l.top-this.offset(t).height&&(t.y=l.height+l.top-this.offset(t).height)),t.css({left:t.x+"px",top:t.y+"px"}),this.calculatePosition(n,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},moveTo:function(e,t){this.parent=e,0==this.isSameParent()&&$(".dropFileHere").addClass("my-FolderDrop"),this.isSameParent()&&this.source.index()<t&&(t-=1),this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){$(".dropFileHere").removeClass("my-FolderDrop"),!0===this.parent.checkdragable(this.index,this.source.modelValue)&&(this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue))}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")},findAncestor:function(e,t){e=e[0];for(var n=Element.matches||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;(e=e.parentElement)&&!n.call(e,t););return e?angular.element(e):angular.element(document.body)}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableController",["$scope",function(e){this.scope=e,e.modelValue=null,e.callbacks=null,e.type="sortable",e.options={},e.isDisabled=!1,e.insertItem=function(t,n){var o=e.modelValue[t];if(void 0!=n.name&&""!=n.name&&1==n.folderInnerDrag)e.modelValue.splice(t,0,n),e.onDropComplete("folder");else if(void 0!=n.pageId&&""!=n.pageId||void 0!==n.answers&&""!=n.answers&&!n.folderInnerDrag&&!o.folderInnerDrag){if(!n.pageId||n.folderInnerDrag||o.folderInnerDrag)return e.modelValue.splice(t,0,n),!1;e.modelValue.splice(t,0,n),e.onDropComplete("",n)}else e.modelValue.splice(t,0,n),e.copyvalue("","",e.active.pageId)},e.checkdragable=function(t,n){var o=e.modelValue[t];if(void 0!==o&&(o.customVideoUrl||o.trackUrls||o.subFieldLebal&&n.subFieldLebal||o.addField&&n.addField||o.answers||o.catName&&n.subcat||o.subCatName&&n.subCatName))return!0;if("1"==e.modelValue[0].folderDrag&&"folder"==n.identifire)return!1;if(void 0!==o&&"1"==e.modelValue[0].folderDrag&&"folder"!=n.identifire&&1!=n.folderInnerDrag)e.onDropCompleteFolder(n);else{if(void 0===o||void 0!==o.dragdrop)return void 0!==o&&(void 0!==o.name&&""!=o.name||void 0!==o.dragdrop&&""!=o.dragdrop);if(void 0===n.name)return!1;if(""!=o.name&&""!=n.name&&1==n.folderInnerDrag&&1==o.folderInnerDrag&&n.id!=o.id)return!0;if(!o.folderDrag&&""!=n.name&&""!=o.name&&1!=n.folderInnerDrag&&1!=o.folderInnerDrag&&!o.listDragdrop&&!n.listDragdrop&&!o.catDragdrop&&!n.catDragdrop||n.catDragdrop&&o.catDragdrop||n.listDragdrop&&o.listDragdrop)return!0;if("1"!=e.modelValue[0].folderDrag)return!1;e.movePagesToRoot(n)}},e.removeItem=function(t){var n=null;return t>-1&&(n=e.modelValue.splice(t,1)[0]),n},e.isEmpty=function(){return e.modelValue&&0===e.modelValue.length},e.accept=function(t,n,o){return e.callbacks.accept(t,n,o)}}]),e.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(e,t,n,o){var a,r;(a=o)&&(a.$render=function(){e.modelValue=a.$modelValue},e.element=t,t.data("_scope",e),(r={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragMove:null,dragCancel:null,dragEnd:null}).accept=function(e,t,n){return!0},r.orderChanged=function(e){},r.itemMoved=function(e){},r.dragStart=function(e){},r.dragMove=function(e){},r.dragCancel=function(e){},r.dragEnd=function(e){},e.$watch(n.asSortable,function(t,n){angular.forEach(t,function(t,n){r[n]?"function"==typeof t&&(r[n]=t):e.options[n]=t}),e.callbacks=r},!0),angular.isDefined(n.isDisabled)&&e.$watch(n.isDisabled,function(t,n){angular.isUndefined(t)||(e.isDisabled=t)},!0))}}})}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemHandleController",["$scope",function(e){this.scope=e,e.itemScope=null,e.type="handle"}]),e.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(e,t,n,o){return{require:"^asSortableItem",scope:!0,restrict:"C",controller:"ui.sortable.sortableItemHandleController",link:function(a,r,l,i){function s(e,t){e[0].parentNode.insertBefore(f[0],e[0]),m.moveTo(t.sortableScope,t.index())}function c(e){for(var t;!t&&e.length;)(t=e.data("_scope"))||(e=e.parent());return t}function d(){p.replaceWith(a.itemScope.element),f.remove(),u.remove(),u=null,V=!1,h.css("cursor",""),h.removeClass("as-sortable-un-selectable")}var u,f,p,g,m,h,b,v,C,D,S,x,y,$,w,Y,X,I,E,k,V,P,A,O=!1;k=n.hasOwnProperty("ontouchstart"),e.handleClass&&r.addClass(e.handleClass),a.itemScope=i.scope,r.data("_scope",a),a.$watch("sortableScope.isDisabled",function(e){O!==e&&((O=e)?X():Y())}),P=function(e){return"function"==typeof a.sortableScope.options.placeholder?angular.element(a.sortableScope.options.placeholder(e)):"string"==typeof a.sortableScope.options.placeholder?angular.element(a.sortableScope.options.placeholder):angular.element(o[0].createElement(e.element.prop("tagName")))},v=function(e){var n,a=function(){angular.element(o).unbind("mousemove",l),angular.element(o).unbind("touchmove",l),r.unbind("mouseup",a),r.unbind("touchend",a),r.unbind("touchcancel",a)},l=function(o){o.preventDefault();var r=t.eventObj(o);n||(n={clientX:r.clientX,clientY:r.clientY}),Math.abs(r.clientX-n.clientX)+Math.abs(r.clientY-n.clientY)>10&&(a(),D(e))};angular.element(o).bind("mousemove",l),angular.element(o).bind("touchmove",l),r.bind("mouseup",a),r.bind("touchend",a),r.bind("touchcancel",a)},D=function(n){var l,i;(k||2!==n.button&&3!==n.which)&&(k&&t.isTouchInvalid(n)||!V&&$(n)&&(V=!0,n.preventDefault(),l=t.eventObj(n),C=angular.element(o[0].querySelector(a.sortableScope.options.scrollableContainer)).length>0?o[0].querySelector(a.sortableScope.options.scrollableContainer):o[0].documentElement,(h=a.sortableScope.options.containment?t.findAncestor(r,a.sortableScope.options.containment):angular.element(o[0].body)).css("cursor","move"),h.addClass("as-sortable-un-selectable"),b=a.sortableScope.options.containerPositioning||"absolute",m=t.dragItem(a),i=a.itemScope.element.prop("tagName"),(u=angular.element(o[0].createElement(a.sortableScope.element.prop("tagName"))).addClass(a.sortableScope.element.attr("class")).addClass(e.dragClass)).css("width",t.width(a.itemScope.element)+"px"),u.css("height",t.height(a.itemScope.element)+"px"),(f=P(a.itemScope).addClass(e.placeHolderClass).addClass(a.sortableScope.options.additionalPlaceholderClass)).css("width",t.width(a.itemScope.element)+"px"),f.css("height",t.height(a.itemScope.element)+"px"),p=angular.element(o[0].createElement(i)),e.hiddenClass&&p.addClass(e.hiddenClass),g=t.positionStarted(l,a.itemScope.element,C),a.itemScope.element.after(f),a.itemScope.element.after(p),u.append(a.itemScope.element),h.append(u),t.movePosition(l,u,g,h,b,C),a.sortableScope.$apply(function(){a.callbacks.dragStart(m.eventArgs())}),I()))},$=function(e){var n,o,a;for(a=(o=c(n=angular.element(e.target)))&&"handle"===o.type;a&&n[0]!==r[0];)t.noDrag(n)&&(a=!1),n=n.parent();return a},S=function(r){var l,i,d,p,v;if((!k||!t.isTouchInvalid(r))&&V&&u){if(r.preventDefault(),l=t.eventObj(r),a.sortableScope.$apply(function(){a.callbacks.dragMove(g,h)}),t.movePosition(l,u,g,h,b,C),i=l.pageX-o[0].documentElement.scrollLeft,d=l.pageY-(n.pageYOffset||o[0].documentElement.scrollTop),u.addClass(e.hiddenClass),o[0].elementFromPoint(i,d),v=angular.element(o[0].elementFromPoint(i,d)),u.removeClass(e.hiddenClass),u.addClass(e.dragging),!(p=c(v))||!p.type)return;if("handle"===p.type&&(p=p.itemScope),"item"!==p.type&&"sortable"!==p.type)return;if("item"===p.type&&p.accept(a,p.sortableScope,p)){v=p.element;var D=w(p.sortableScope.element);0>D?s(v,p):0==p.index()?s(v,p):(p.index(),s(v,p))}"sortable"===p.type&&p.accept(a,p)&&v[0].parentNode!==p.element[0]&&(A(v)||(v[0].appendChild(f[0]),m.moveTo(p,p.modelValue.length)))}},w=function(t){var n,o;for(n=t.children(),o=0;o<n.length;o+=1)if(angular.element(n[o]).hasClass(e.placeHolderClass))return o;return-1},A=function(e){return w(e)>=0},x=function(e){V&&(e.preventDefault(),u&&(d(),m.apply(),a.sortableScope.$apply(function(){m.isSameParent()?m.isOrderChanged()&&a.callbacks.orderChanged(m.eventArgs()):a.callbacks.itemMoved(m.eventArgs())}),a.sortableScope.$apply(function(){a.callbacks.dragEnd(m.eventArgs())}),m=null),E())},y=function(e){V&&(e.preventDefault(),u&&(d(),a.sortableScope.$apply(function(){a.callbacks.dragCancel(m.eventArgs())}),m=null),E())},X=function(){r.unbind("touchstart",v),r.unbind("mousedown",v)},(Y=function(){r.bind("touchstart",v),r.bind("mousedown",v)})(),angular.element(o[0].body).bind("keydown",function(e){27===e.keyCode&&y(e)}),I=function(){angular.element(o).bind("touchmove",S),angular.element(o).bind("touchend",x),angular.element(o).bind("touchcancel",y),angular.element(o).bind("mousemove",S),angular.element(o).bind("mouseup",x)},E=function(){angular.element(o).unbind("touchend",x),angular.element(o).unbind("touchcancel",y),angular.element(o).unbind("touchmove",S),angular.element(o).unbind("mouseup",x),angular.element(o).unbind("mousemove",S)}}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemController",["$scope",function(e){this.scope=e,e.sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){return e.$index},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]),e.directive("asSortableItem",["sortableConfig",function(e){return{require:["^asSortable","?ngModel"],restrict:"C",controller:"ui.sortable.sortableItemController",link:function(t,n,o,a){var r=a[0],l=a[1];e.itemClass&&n.addClass(e.itemClass),t.sortableScope=r.scope,l?l.$render=function(){t.modelValue=l.$modelValue}:t.modelValue=r.scope.modelValue[t.$index],t.element=n,n.data("_scope",t)}}}])}(),angular.module("ngDraggable",[]).service("ngDraggable",["$window",function(e){var t=function(e){return void 0!==e};this.getEventProp=function(e,n,o){return t(e.touches)&&e.touches[0]?e.touches[0][n]:t(e[n])?e[n]:e.originalEvent&&!o?this.getEventProp(e.originalEvent,n,!0):void 0},this.getPrivOffset=function(n){var o={top:0,left:0};return t(n[0].getBoundingClientRect)&&(o=n[0].getBoundingClientRect()),{top:o.top+e.pageYOffset-n[0].clientTop,left:o.left+e.pageXOffset-n[0].clientLeft}}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(e,t,n,o,a){return{restrict:"A",link:function(r,l,i){r.value=i.ngDrag;var s,c,d,u,f,p,g,m=!1,h="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,b="touchmove mousemove",v=r.$id,C=null,D=null,S=!1,x=null,y=t(i.ngDragSuccess)||null,$=function(e){e&&(r.$on("$destroy",w),r.$watch(i.ngDrag,X),r.$watch(i.ngCenterAnchor,I),r.$watch(i.ngDragData,Y),l.on("touchstart mousedown",k),h||"img"!=l[0].nodeName.toLowerCase()||l.on("mousedown",function(){return!1}))},w=function(e){$(!1)},Y=function(e,t){C=e},X=function(e,t){S=e},I=function(e,t){angular.isDefined(e)&&(m=e||"true")},E=function(e){return angular.isDefined(angular.element(e.target).attr("ng-click"))||angular.isDefined(angular.element(e.target).attr("ng-dblclick"))||angular.isDefined(angular.element(e.target).attr("ng-cancel-drag"))},k=function(e){S&&(E(e)||(h?(V(),x=setTimeout(function(){V(),P(e)},100),n.on(b,V),n.on("touchend mouseup",V)):P(e)))},V=function(){clearTimeout(x),n.off(b,V),n.off("touchend mouseup",V)},P=function(t){S&&(t.preventDefault(),l.addClass("dragging"),s=a.getPrivOffset(l),D=s,l.centerX=l[0].offsetWidth/2,l.centerY=l[0].offsetHeight/2,c=a.getEventProp(t,"pageX"),d=a.getEventProp(t,"pageY"),p=c-s.left,g=d-s.top,m?(u=c-l.centerX-o.pageXOffset,f=d-l.centerY-o.pageYOffset):(u=c-p-o.pageXOffset,f=d-g-o.pageYOffset),n.on(b,A),n.on("touchend mouseup",O),e.$broadcast("draggable:start",{x:c,y:d,tx:u,ty:f,event:t,element:l,data:C}))},A=function(t){S&&(t.preventDefault(),c=a.getEventProp(t,"pageX"),d=a.getEventProp(t,"pageY"),m?(u=c-l.centerX-D.left,f=d-l.centerY-D.top):(u=c-p-D.left,f=d-g-D.top),F(u,f),e.$broadcast("draggable:move",{x:c,y:d,tx:u,ty:f,event:t,element:l,data:C,uid:v}))},O=function(t){S&&(t.preventDefault(),e.$broadcast("draggable:end",{x:c,y:d,tx:u,ty:f,event:t,element:l,data:C,callback:T,uid:v}),l.removeClass("dragging"),M(),n.off(b,A),n.off("touchend mouseup",O))},T=function(e){y&&r.$apply(function(){y(r,{$data:C,$event:e})})},M=function(){l.css({transform:"","z-index":""})},F=function(e,t){l.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999})};!function(){l.attr("draggable","false"),$(!0)}()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(e,t,n,o){return{restrict:"A",link:function(n,a,r){n.value=r.ngDrop;var l=n.$id,i=!1,s=e(r.ngDropSuccess),c=function(e){e&&(r.$observe("ngDrop",u),n.$on("$destroy",d),n.$on("draggable:start",f),n.$on("draggable:move",p),n.$on("draggable:end",g))},d=function(e){c(!1)},u=function(e,t){i=n.$eval(e)},f=function(e,t){i&&m(t.x,t.y,t.element)},p=function(e,t){i&&m(t.x,t.y,t.element)},g=function(e,o){i&&l!==o.uid&&(m(o.x,o.y,o.element)&&(o.callback&&o.callback(o),t(function(){s(n,{$data:o.data,$event:o})})),h(!1,o.element))},m=function(e,t,n){var o=b(e,t);return h(o,n),o},h=function(e,t){e?(a.addClass("drag-enter"),t.addClass("drag-over")):(a.removeClass("drag-enter"),t.removeClass("drag-over"))},b=function(e,t){var n=o.getPrivOffset(a);return n.right=n.left+a[0].offsetWidth,n.bottom=n.top+a[0].offsetHeight,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top};!function(){c(!0)}()}}}]);
